<template>

        <div  style="height: 100vh">

            <div>
                <div class="sc-1duRon-2 pvvuG" style="margin: 0">
                    <div  class="sm-btn-group sc-1duRon-5 dvRHZl sc-17dnj82-0 dfsiVH" style="z-index: 9999">
                        <span class="switch-tips">没有帐号？请</span>
                        <router-link to="/regist" class="sm-button  sc-1n784rm-0 sfCUt" type="default"  >注册</router-link>
                    </div>

                </div>
            </div>
            <div class="sc-1duRon-1 sbfRl">
                <p class="sc-1I1iYs-3 kmwMDA" style='font-family: serif;font-size: 18px;color: #41464B;'>宠物之家</p>

            </div>
            <div class="sc-1duRon-3 cPHJDB">
                <div class="sc-1duRon-4 doAKkT">
                    <div class="sc-3JRwrF irtYus">
                        <div class="main">

                            <div class="title">
                                <!--                                <img src="http://localhost/exam/resources/views/img/70.png" style="width: 40%">-->
                                <p >登录</p>
                            </div>

                            <div class="sc-3JRwrF-1 khjAih">

                                <div class="form-wrapper">

                                    <div class="sc-2oZUsG bHHvBK">

                                        <div>

                                            <form action="">
                                                <div class="sc-3ksGSP kPTEpp" type="mobileOrEmail"><label class="label">用户名</label>
                                                    <at-input v-model="phone"  :status="phoneType" :icon="''"></at-input>
                                                    <div :class="{'errorTips':phoneType === 'error' , 'successTips':phoneType === 'success'}" id="usernameTip">{{phoneTip}}</div>
                                                </div>
                                                <div class="sc-3ksGSP kPTEpp" type="mobileOrEmail"><label class="label">登录密码</label>

                                                    <at-input v-model="password" type="password"   :status="passwordType" :icon="''"></at-input>
                                                    <div :class="{'errorTips':passwordType === 'error' , 'successTips':passwordType === 'success'}" id="phoneTip">{{passwordTip}}</div>


                                                </div>
                                                <div class="sc-3ksGSP kPTEpp" type="password"><label class="label">图形验证码</label>
                                                    <at-input v-model="imgYzm"   :status="imgYzmType" :icon="''">
                                                        <template slot="append">
                                                            <span style="width: 80px;cursor: pointer;">
                                                                <img :src="yzmSrc" @click="changeYzmSrc" style="width: 150px;height: 30px" alt="">
                                                            </span>
                                                        </template>
                                                    </at-input>

                                                    <div :class="{'errorTips':imgYzmType === 'error' , 'successTips':imgYzmType === 'success'}">{{imgYzmTip}}</div>
                                                </div>
                                                <button class="sm-button submit sc-1n784rm-0 bcuuIb" type="button" @click="userLogin">
                                                    登录</button>
                                                <button class="  sm-button submit   " style="margin-top: 20px" type="button" @click="doAdminLogin">
                                                    <svg t="1583480199689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2444" width="256" height="256"><path d="M430.08 580.01408h162.96618667v178.69482667H430.08z" fill="#D9A78C" p-id="2445"></path><path d="M849.5104 940.57130667c-0.98304-4.69674667-2.07530667-9.61194667-3.2768-14.63637333-1.41994667-6.33514667-2.83989333-12.77952-4.36906667-19.44234667-1.52917333-6.88128-3.16757333-13.87178667-4.80597333-20.97152-10.15808 7.97354667-22.17301333 12.12416-34.4064 12.67029333v0.10922667c-16.384 0.76458667-32.98645333-5.13365333-45.43829333-17.58549333-23.59296-23.59296-23.59296-61.82229333 0-85.30602667 12.45184-12.56106667 29.16352-18.35008 45.43829333-17.58549333 1.41994667 0.10922667 2.73066667 0.21845333 4.04138667 0.32768 0.32768 0 0.54613333 0.10922667 0.87381333 0.10922666 0.32768 0 0.54613333 0.10922667 0.87381333 0.10922667 0.32768 0 0.54613333 0.10922667 0.87381334 0.10922667-1.74762667-5.57056-3.38602667-10.81344-5.02442667-15.61941334-0.54613333-1.74762667-1.20149333-3.38602667-1.74762667-5.02442666-4.36906667-12.45184-8.51968-21.2992-11.90570666-24.90368-2.29376-2.40298667-6.00746667-4.80597333-10.70421334-7.20896-2.94912-1.52917333-6.33514667-2.94912-9.93962666-4.36906667-48.93354667-19.11466667-157.17717333-34.95253333-157.17717334-34.95253333l-19.77002666 1.6384-81.48309334 6.77205333v301.24714667h294.69354667c1.52917333 0 3.05834667-0.10922667 4.58752-0.43690667 1.85685333-0.32768 3.60448-0.98304 5.24288-1.74762667l1.96608-0.98304c0.32768-0.21845333 0.65536-0.43690667 0.87381333-0.65536 0.65536-0.43690667 1.20149333-0.87381333 1.74762667-1.31072 1.41994667-1.20149333 2.62144-2.51221333 3.71370667-3.93216 0.65536-0.87381333 1.20149333-1.74762667 1.74762666-2.62144 0.21845333-0.32768 0.32768-0.76458667 0.54613334-1.09226666 0.32768-0.65536 0.54613333-1.31072 0.87381333-1.96608 0.10922667-0.32768 0.21845333-0.76458667 0.32768-1.09226667 0.10922667-0.32768 0.21845333-0.65536 0.32768-1.09226667 0.32768-1.09226667 0.43690667-2.07530667 0.54613333-3.16757333 0.10922667-0.76458667 0.10922667-1.6384 0.10922667-2.40298667V948.3264c6.99050667-1.85685333 13.98101333-4.47829333 20.64384-7.75509333 0 0.10922667 0 0 0 0z" fill="#2D404E" p-id="2446"></path><path d="M715.59850667 308.80426667v-1.09226667c-6.44437333-196.38954667-127.03061333-238.98794667-204.03541334-238.98794666v542.74730666c20.53461333 0 52.4288-10.37653333 81.48309334-23.26528 30.36501333-13.54410667 57.67168-29.81888 65.86368-40.19541333 11.68725333-14.85482667 33.42336-55.92405333 46.42133333-118.29248 6.33514667-30.25578667 10.48576-65.536 10.48576-105.18528 0-5.46133333-0.10922667-10.59498667-0.21845333-15.72864z" fill="#EAC0A7" p-id="2447"></path><path d="M721.16906667 308.25813334c-0.54613333-0.10922667-1.20149333-0.21845333-1.85685334-0.32768-1.31072-0.21845333-2.51221333-0.21845333-3.82293333-0.21845334H714.06933333c-9.17504 0.32768-18.0224 5.02442667-25.23136 12.67029334-9.39349333 10.04885333-16.16554667 25.12213333-18.0224 42.81685333-0.65536 5.78901333-0.65536 11.4688-0.10922666 17.03936 2.29376 25.55904 16.05632 46.09365333 34.51562666 49.47968 0.43690667 0.10922667 0.98304 0.21845333 1.41994667 0.21845333 23.26528 3.16757333 45.00138667-21.51765333 48.49664-55.15946666 3.49525333-32.87722667-11.68725333-62.04074667-33.96949333-66.51904z" fill="#EAC0A7" p-id="2448"></path><path d="M307.74613333 302.57834667c-0.10922667 1.6384-0.10922667 3.38602667-0.21845333 5.02442667-0.21845333 5.46133333-0.32768 11.03189333-0.32768 16.82090666 0 39.75850667 4.25984 74.92949333 10.48576 105.18528 12.99797333 62.36842667 34.84330667 103.43765333 46.42133333 118.29248 8.08277333 10.37653333 35.38944 26.76053333 65.86368 40.19541334 29.05429333 12.88874667 60.94848 23.26528 81.48309334 23.26528V68.61482667c-76.24021333 0-195.29728 41.94304-203.70773334 233.96352z" fill="#F2D7BC" p-id="2449"></path><path d="M352.31061333 363.19914667c-0.21845333-2.51221333-0.65536-5.02442667-1.09226666-7.42741333-3.38602667-17.58549333-11.68725333-32.00341333-22.50069334-40.41386667-6.44437333-5.02442667-13.65333333-7.75509333-21.18997333-7.75509333-1.31072 0-2.51221333 0.10922667-3.82293333 0.32768-23.26528 3.16757333-39.3216 33.09568-35.82634667 66.73749333 3.49525333 33.64181333 25.23136 58.43626667 48.49664 55.15946667 0.43690667-0.10922667 0.98304-0.10922667 1.41994667-0.21845334 22.50069333-4.15061333 37.90165333-33.53258667 34.51562666-66.40981333z" fill="#F2D7BC" p-id="2450"></path><path d="M430.08 688.14848l-19.77002667-1.6384S255.31733333 709.12 232.48896 732.93141334c-19.98848 20.75306667-61.38538667 219.5456-70.99733333 263.12704h350.07146666V694.92053334l-81.48309333-6.77205334z" fill="#2D404E" p-id="2451"></path><path d="M430.08 662.15253334l-1.31072-0.54613334-20.42538667 20.75306667 1.85685334 4.15061333 19.77002666 43.79989334 12.77952 28.39893333 6.77205334 14.96405333 11.79648-14.96405333 50.13504-63.78837333-81.37386667-32.768zM594.24768 661.6064l-1.20149333 0.43690667-81.48309334 32.768 50.13504 63.78837333 11.79648 14.96405334 6.77205334-14.96405334 12.77952-28.39893333 19.77002666-43.79989333 1.85685334-4.15061334-20.42538667-20.64384z" fill="#FFFFFF" p-id="2452"></path><path d="M510.14314667 12.69077334c-278.528 0-208.84138667 295.67658667-208.84138667 295.67658666s2.83989333-0.76458667 6.44437333-0.76458666c2.51221333-0.10922667 14.19946667 0.76458667 20.97152 12.77952 6.11669333 10.92266667 10.81344 30.36501333 10.81344 64.77141333h6.99050667s1.96608-9.50272 4.58752-24.35754667c4.25984-24.35754667 10.48576-63.24224 12.99797333-99.50549333 52.53802667 0 101.79925333-3.60448 147.456-16.27477333 39.43082667-10.92266667 76.24021333-28.61738667 109.99125334-56.57941334 41.39690667 0 46.96746667 51.55498667 46.96746666 90.98581334l-18.13162666 6.99050666s17.58549333 34.29717333 18.78698666 98.74090667h12.56106667s-0.65536-37.35552 7.09973333-59.74698667c5.02442667-18.56853333 31.23882667-18.13162667 33.09568-16.93013333 0 0 0.32768-1.6384 0.87381334-4.69674667 7.09973333-38.33856 44.12757333-291.08906667-212.66432-291.08906666z" fill="#2F343A" p-id="2453"></path><path d="M444.8256 504.75690667c0 15.07328 29.92810667 27.19744 66.73749333 27.19744 36.91861333 0 66.73749333-12.23338667 66.73749334-27.19744H444.8256z" fill="#FFFFFF" p-id="2454"></path><path d="M909.91274667 808.29781334c-2.51221333-9.50272-6.33514667-18.78698667-11.4688-27.63434667-4.80597333-8.30122667-10.81344-16.16554667-18.0224-23.37450667-7.20896-7.20896-15.29173333-13.32565333-23.70218667-18.24085333-0.43690667-0.21845333-0.87381333-0.43690667-1.20149333-0.76458667 0 0-0.10922667 0-0.10922667-0.10922666-0.65536-0.32768-1.31072-0.65536-1.85685333-1.09226667-0.10922667-0.10922667-0.32768-0.21845333-0.54613334-0.21845333l-1.31072-0.65536c-0.10922667-0.10922667-0.32768-0.21845333-0.43690666-0.21845334-0.54613333-0.21845333-0.98304-0.54613333-1.52917334-0.76458666-0.54613333-0.32768-1.09226667-0.54613333-1.6384-0.76458667-6.22592-2.83989333-12.56106667-5.13365333-19.00544-6.88128-8.62890667-2.29376-17.47626667-3.49525333-26.2144-3.71370667-7.53664-0.21845333-15.18250667 0.43690667-22.71914666 1.74762667-3.38602667 0.54613333-6.66282667 1.31072-9.93962667 2.18453333-9.39349333 2.51221333-18.56853333 6.33514667-27.19744 11.35957334-8.41045333 4.9152-16.27477333 10.92266667-23.48373333 18.13162666-7.20896 7.20896-13.21642667 15.07328-18.13162667 23.48373334-5.02442667 8.62890667-8.84736 17.91317333-11.35957333 27.30666666-5.24288 19.22389333-5.24288 39.64928-0.10922667 58.87317334 2.51221333 9.61194667 6.33514667 18.89621333 11.35957333 27.63434666 4.9152 8.51968 10.92266667 16.49322667 18.24085334 23.81141334 7.09973333 7.09973333 14.96405333 13.1072 23.26528 17.91317333 8.73813333 5.13365333 17.91317333 8.95658667 27.41589333 11.4688 10.70421333 2.94912 21.62688 4.15061333 32.65877333 3.93216 8.84736-0.21845333 17.69472-1.41994667 26.2144-3.71370667 7.09973333-1.85685333 13.98101333-4.36906667 20.64384-7.64586666 2.51221333-1.20149333 4.9152-2.51221333 7.31818667-3.93216 6.22592-3.60448 12.23338667-7.86432 17.91317333-12.88874667 0.87381333-0.76458667 1.85685333-1.6384 2.73066667-2.51221333 0.10922667-0.10922667 0.21845333-0.21845333 0.32768-0.21845334 0.43690667-0.32768 0.76458667-0.76458667 1.20149333-1.09226666l0.32768-0.32768 1.09226667-1.09226667c2.73066667-2.83989333 5.35210667-5.67978667 7.86432-8.62890667 0.87381333-1.09226667 1.74762667-2.18453333 2.62144-3.38602666 0.87381333-1.09226667 1.6384-2.29376 2.51221333-3.49525334l2.62144-3.93216c0.87381333-1.31072 1.6384-2.73066667 2.40298667-4.04138666 5.13365333-8.84736 8.95658667-18.24085333 11.4688-27.8528 4.9152-19.00544 4.9152-39.3216-0.21845333-58.65472z m-152.80810667 72.41728c-23.59296-23.59296-23.59296-61.82229333 0-85.30602667 12.45184-12.56106667 29.16352-18.35008 45.43829333-17.58549333 1.41994667 0.10922667 2.73066667 0.21845333 4.04138667 0.32768 0.32768 0 0.54613333 0.10922667 0.87381333 0.10922666 0.32768 0 0.54613333 0.10922667 0.87381334 0.10922667 0.32768 0 0.54613333 0.10922667 0.87381333 0.10922667 0.21845333 0 0.32768 0 0.54613333 0.10922666 0.43690667 0.10922667 0.98304 0.21845333 1.41994667 0.21845334 0.43690667 0.10922667 0.98304 0.21845333 1.41994667 0.32768 0.43690667 0.10922667 0.98304 0.21845333 1.41994666 0.32768 0.65536 0.10922667 1.31072 0.32768 1.96608 0.54613333 9.61194667 2.73066667 18.78698667 7.86432 26.32362667 15.51018667 20.20693333 20.20693333 23.04682667 51.00885333 8.73813333 74.27413333-0.65536 1.09226667-1.41994667 2.18453333-2.18453333 3.2768s-1.52917333 2.18453333-2.40298667 3.16757333c-1.31072 1.52917333-2.62144 3.05834667-4.04138666 4.47829334l-1.20149334 1.20149333c-0.65536 0.65536-1.31072 1.20149333-1.96608 1.85685333-0.32768 0.32768-0.76458667 0.65536-1.09226666 0.98304-0.32768 0.32768-0.76458667 0.65536-1.09226667 0.87381334-10.15808 7.97354667-22.17301333 12.23338667-34.4064 12.77952-16.384 0.65536-33.09568-5.24288-45.54752-17.69472z" fill="#DDDBD6" p-id="2455"></path><path d="M751.42485333 748.11392L724.44586667 721.13493334c-8.73813333-8.73813333-23.15605333-8.73813333-32.00341334 0l-9.61194666 9.61194666c-8.73813333 8.73813333-8.73813333 23.15605333 0 32.00341334l26.97898666 26.97898666c8.73813333 8.73813333 23.15605333 8.73813333 32.00341334 0l9.61194666-9.61194666c8.84736-8.84736 8.84736-23.26528 0-32.00341334z m0.32768 147.34677334l-9.61194666-9.61194667c-8.73813333-8.73813333-23.15605333-8.73813333-32.00341334 0l-26.97898666 26.97898667c-8.73813333 8.73813333-8.73813333 23.15605333 0 32.00341333l9.61194666 9.61194667c8.84736 8.84736 23.15605333 8.73813333 32.00341334 0l26.97898666-26.97898667c8.73813333-8.84736 8.73813333-23.26528 0-32.00341333zM828.75733333 700.928c0-0.43690667 0-0.76458667-0.10922666-1.09226666-0.43690667-4.15061333-1.96608-7.97354667-4.36906667-11.25034667-0.65536-0.87381333-1.31072-1.6384-2.18453333-2.51221333-0.54613333-0.54613333-0.98304-0.98304-1.52917334-1.41994667-0.21845333-0.21845333-0.43690667-0.32768-0.65536-0.54613333-3.49525333-2.73066667-7.86432-4.36906667-12.56106666-4.58752h-14.85482667c-12.45184 0-22.60992 10.15808-22.60992 22.60992v38.12010666c0 12.45184 10.26730667 22.60992 22.60992 22.60992h13.65333333c12.45184 0 22.60992-10.26730667 22.60992-22.60992v-38.22933333c0.10922667-0.43690667 0.10922667-0.76458667 0-1.09226667z m-22.50069333 211.79050667h-13.65333333c-12.45184 0-22.60992 10.26730667-22.60992 22.60992v38.22933333c0 12.45184 10.26730667 22.60992 22.60992 22.60992h13.65333333c1.52917333 0 3.05834667-0.10922667 4.58752-0.43690666 1.85685333-0.32768 3.60448-0.98304 5.24288-1.74762667l1.96608-0.98304c0.32768-0.21845333 0.65536-0.43690667 0.87381333-0.65536 0.65536-0.43690667 1.20149333-0.87381333 1.74762667-1.31072 1.41994667-1.20149333 2.62144-2.51221333 3.71370667-3.93216 0.65536-0.87381333 1.20149333-1.74762667 1.74762666-2.62144 0.21845333-0.32768 0.32768-0.76458667 0.54613334-1.09226667 0.32768-0.65536 0.54613333-1.31072 0.87381333-1.96608 0.10922667-0.32768 0.21845333-0.76458667 0.32768-1.09226666 0.10922667-0.32768 0.21845333-0.65536 0.32768-1.09226667 0.32768-1.09226667 0.43690667-2.07530667 0.54613333-3.16757333 0.10922667-0.76458667 0.10922667-1.6384 0.10922667-2.40298667v-38.22933333c-0.10922667-12.56106667-10.26730667-22.71914667-22.60992-22.71914667z m-103.98378667-104.42069333h-38.22933333c-12.45184 0-22.60992 10.15808-22.60992 22.60992V844.56106667c0 12.45184 10.15808 22.60992 22.60992 22.60992h38.22933333c12.45184-0.10922667 22.60992-10.26730667 22.60992-22.60992v-13.65333333c-0.10922667-12.34261333-10.26730667-22.60992-22.60992-22.60992z" fill="#DDDBD6" p-id="2456"></path><path d="M916.46634667 913.04618667l-17.91317334-17.91317333-9.06581333-9.06581334c-8.73813333-8.73813333-23.15605333-8.84736-32.00341333 0l-9.61194667 9.61194667c-3.05834667 3.05834667-5.02442667 6.77205333-6.00746667 10.81344-1.52917333 6.66282667-0.10922667 13.87178667 4.36906667 19.44234667 0.54613333 0.65536 0.98304 1.20149333 1.6384 1.74762666l8.95658667 8.95658667v0.10922667l17.91317333 17.91317333c8.73813333 8.73813333 23.15605333 8.73813333 32.00341333 0l9.61194667-9.61194667c8.84736-8.84736 8.84736-23.15605333 0.10922667-32.00341333z m0.21845333-182.62698667l-9.61194667-9.61194666c-8.73813333-8.73813333-23.15605333-8.73813333-32.00341333 0l-26.97898667 26.97898666c-8.73813333 8.73813333-8.73813333 23.15605333 0 32.00341334l9.61194667 9.61194666c8.84736 8.84736 23.15605333 8.84736 32.00341333 0l8.62890667-8.62890666v-0.10922667l18.24085333-18.24085333c8.95658667-8.73813333 8.95658667-23.15605333 0.10922667-32.00341334z m41.50613333 100.48853334c0-12.45184-10.15808-22.60992-22.60992-22.60992h-38.22933333c-12.45184 0-22.60992 10.15808-22.60992 22.60992V844.56106667c0 12.45184 10.26730667 22.60992 22.60992 22.60992h38.12010667c12.45184-0.10922667 22.60992-10.26730667 22.60992-22.60992l0.10922666-13.65333333z" fill="#CCC9C4" p-id="2457"></path><path d="M909.91274667 808.29781334c-2.62144-9.61194667-6.44437333-18.89621333-11.4688-27.63434667-4.80597333-8.30122667-10.81344-16.16554667-18.0224-23.37450667-7.31818667-7.20896-15.29173333-13.32565333-23.70218667-18.13162666l-1.31072-0.65536s-0.10922667 0-0.10922667-0.10922667c-0.65536-0.32768-1.31072-0.65536-1.85685333-1.09226667-0.10922667-0.10922667-0.32768-0.21845333-0.54613333-0.21845333l-1.31072-0.65536c-0.10922667-0.10922667-0.32768-0.21845333-0.43690667-0.21845333-0.54613333-0.21845333-0.98304-0.54613333-1.52917333-0.76458667-0.54613333-0.32768-1.09226667-0.54613333-1.6384-0.76458667-6.22592-2.83989333-12.56106667-5.13365333-19.00544-6.88128v-25.88672-1.09226666c0-0.43690667 0-0.76458667-0.10922667-1.09226667-0.43690667-4.15061333-1.96608-7.97354667-4.36906667-11.25034667-0.65536-0.87381333-1.31072-1.6384-2.18453333-2.51221333-0.54613333-0.54613333-0.98304-0.98304-1.52917333-1.41994667-0.21845333-0.21845333-0.43690667-0.32768-0.65536-0.54613333-3.49525333-2.62144-7.86432-4.36906667-12.56106667-4.58752H802.54293333v98.304c1.41994667 0.10922667 2.73066667 0.21845333 4.04138667 0.32768 0.32768 0 0.54613333 0.10922667 0.87381333 0.10922667 0.32768 0 0.54613333 0.10922667 0.87381334 0.10922666 0.32768 0 0.54613333 0.10922667 0.87381333 0.10922667 0.21845333 0 0.32768 0 0.54613333 0.10922667 0.43690667 0.10922667 0.98304 0.21845333 1.41994667 0.21845333 0.43690667 0.10922667 0.98304 0.21845333 1.41994667 0.32768 0.43690667 0.10922667 0.98304 0.21845333 1.41994666 0.32768 0.65536 0.10922667 1.31072 0.32768 1.96608 0.54613333 9.72117333 2.73066667 18.78698667 7.75509333 26.43285334 15.40096 20.20693333 20.20693333 23.04682667 51.11808 8.73813333 74.38336-0.65536 1.09226667-1.41994667 2.18453333-2.18453333 3.2768s-1.52917333 2.18453333-2.40298667 3.16757334c-1.31072 1.52917333-2.62144 3.05834667-4.04138667 4.47829333l-1.20149333 1.20149333c-0.65536 0.65536-1.31072 1.20149333-1.96608 1.85685334-0.32768 0.32768-0.76458667 0.65536-1.09226667 0.98304-0.32768 0.32768-0.76458667 0.65536-1.09226666 0.87381333-10.15808 7.97354667-22.17301333 12.12416-34.4064 12.67029333v97.97632h3.60448c1.52917333 0 3.05834667-0.10922667 4.58752-0.43690666 1.85685333-0.32768 3.60448-0.98304 5.24288-1.74762667l1.96608-0.98304c0.32768-0.21845333 0.65536-0.43690667 0.87381333-0.65536 0.65536-0.43690667 1.20149333-0.87381333 1.74762667-1.31072 1.41994667-1.20149333 2.62144-2.51221333 3.71370666-3.93216 0.65536-0.87381333 1.20149333-1.74762667 1.74762667-2.62144 0.21845333-0.32768 0.32768-0.76458667 0.54613333-1.09226667 0.32768-0.65536 0.54613333-1.31072 0.87381334-1.96608 0.10922667-0.32768 0.21845333-0.76458667 0.32768-1.09226666 0.10922667-0.32768 0.21845333-0.65536 0.32768-1.09226667 0.21845333-1.09226667 0.43690667-2.07530667 0.54613333-3.16757333 0.10922667-0.76458667 0.10922667-1.6384 0.10922667-2.40298667v-25.44981333c7.09973333-1.85685333 13.98101333-4.36906667 20.64384-7.53664 2.51221333-1.20149333 4.9152-2.51221333 7.31818666-3.82293334 6.33514667-3.60448 12.34261333-7.86432 17.91317334-12.77952 0.87381333-0.76458667 1.85685333-1.6384 2.73066666-2.51221333 0.10922667-0.10922667 0.21845333-0.21845333 0.32768-0.21845333 0.43690667-0.32768 0.76458667-0.76458667 1.20149334-1.09226667l0.32768-0.32768 1.20149333-1.20149333c2.73066667-2.83989333 5.35210667-5.67978667 7.86432-8.62890667 0.87381333-1.09226667 1.74762667-2.18453333 2.62144-3.38602667 0.87381333-1.09226667 1.6384-2.29376 2.51221333-3.49525333 0.87381333-1.31072 1.85685333-2.62144 2.62144-3.93216 0.87381333-1.31072 1.6384-2.73066667 2.51221334-4.04138667 5.13365333-8.84736 8.95658667-18.24085333 11.57802666-27.8528 4.80597333-19.44234667 4.80597333-39.75850667-0.43690666-59.09162666z" fill="#CCC9C4" p-id="2458"></path></svg>
                                                    管理员登录</button>
                                            </form>
                                        </div>

                                        <div class="sc-2oZUsG-1 krkGsR">
                                            <tooltip placement="bottom" content="Github登录">
                                                <a @click="GithubAuth">
                                                    <div class="wechat">
                                                        <svg t="1575521212818" class="icon" viewBox="0 0 1049 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2141" width="24" height="24"><path d="M524.979332 0C234.676191 0 0 234.676191 0 524.979332c0 232.068678 150.366597 428.501342 358.967656 498.035028 26.075132 5.215026 35.636014-11.299224 35.636014-25.205961 0-12.168395-0.869171-53.888607-0.869171-97.347161-146.020741 31.290159-176.441729-62.580318-176.441729-62.580318-23.467619-60.841976-58.234462-76.487055-58.234463-76.487055-47.804409-32.15933 3.476684-32.15933 3.476685-32.15933 53.019436 3.476684 80.83291 53.888607 80.83291 53.888607 46.935238 79.963739 122.553122 57.365291 152.97411 43.458554 4.345855-33.897672 18.252593-57.365291 33.028501-70.402857-116.468925-12.168395-239.022047-57.365291-239.022047-259.012982 0-57.365291 20.860106-104.300529 53.888607-140.805715-5.215026-13.037566-23.467619-66.926173 5.215027-139.067372 0 0 44.327725-13.906737 144.282399 53.888607 41.720212-11.299224 86.917108-17.383422 131.244833-17.383422s89.524621 6.084198 131.244833 17.383422C756.178839 203.386032 800.506564 217.29277 800.506564 217.29277c28.682646 72.1412 10.430053 126.029806 5.215026 139.067372 33.897672 36.505185 53.888607 83.440424 53.888607 140.805715 0 201.64769-122.553122 245.975415-239.891218 259.012982 19.121764 16.514251 35.636014 47.804409 35.636015 97.347161 0 70.402857-0.869171 126.898978-0.869172 144.282399 0 13.906737 9.560882 30.420988 35.636015 25.205961 208.601059-69.533686 358.967656-265.96635 358.967655-498.035028C1049.958663 234.676191 814.413301 0 524.979332 0z" fill="#1296db" p-id="2142"></path><path d="M199.040177 753.571326c-0.869171 2.607513-5.215026 3.476684-8.691711 1.738342s-6.084198-5.215026-4.345855-7.82254c0.869171-2.607513 5.215026-3.476684 8.691711-1.738342s5.215026 5.215026 4.345855 7.82254z m-6.953369-4.345856M219.900283 777.038945c-2.607513 2.607513-7.82254 0.869171-10.430053-2.607514-3.476684-3.476684-4.345855-8.691711-1.738342-11.299224 2.607513-2.607513 6.953369-0.869171 10.430053 2.607514 3.476684 4.345855 4.345855 9.560882 1.738342 11.299224z m-5.215026-5.215027M240.760389 807.459932c-3.476684 2.607513-8.691711 0-11.299224-4.345855-3.476684-4.345855-3.476684-10.430053 0-12.168395 3.476684-2.607513 8.691711 0 11.299224 4.345855 3.476684 4.345855 3.476684 9.560882 0 12.168395z m0 0M269.443034 837.011749c-2.607513 3.476684-8.691711 2.607513-13.906737-1.738342-4.345855-4.345855-6.084198-10.430053-2.607513-13.037566 2.607513-3.476684 8.691711-2.607513 13.906737 1.738342 4.345855 3.476684 5.215026 9.560882 2.607513 13.037566z m0 0M308.555733 853.526c-0.869171 4.345855-6.953369 6.084198-13.037566 4.345855-6.084198-1.738342-9.560882-6.953369-8.691711-10.430053 0.869171-4.345855 6.953369-6.084198 13.037566-4.345855 6.084198 1.738342 9.560882 6.084198 8.691711 10.430053z m0 0M351.145116 857.002684c0 4.345855-5.215026 7.82254-11.299224 7.82254-6.084198 0-11.299224-3.476684-11.299224-7.82254s5.215026-7.82254 11.299224-7.82254c6.084198 0 11.299224 3.476684 11.299224 7.82254z m0 0M391.126986 850.049315c0.869171 4.345855-3.476684 8.691711-9.560882 9.560882-6.084198 0.869171-11.299224-1.738342-12.168395-6.084197-0.869171-4.345855 3.476684-8.691711 9.560881-9.560882 6.084198-0.869171 11.299224 1.738342 12.168396 6.084197z m0 0" fill="#1296db" p-id="2143"></path></svg>
                                                    </div>
                                                </a>
                                            </tooltip>

                                            <div class="wework">
                                            <tooltip placement="bottom" content="QQ登录">
                                                <a @click="QQAuth">
                                                <svg t="1575521468259" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4902" width="24" height="24"><path d="M512 0C229.668571 0 0 229.668571 0 512s229.668571 512 512 512 512-229.668571 512-512S794.331429 0 512 0z m0 987.428571C250.148571 987.428571 36.571429 773.851429 36.571429 512S250.148571 36.571429 512 36.571429 987.428571 250.148571 987.428571 512 773.851429 987.428571 512 987.428571z" fill="#3783DD" p-id="4903"></path><path d="M731.428571 504.685714c-8.777143-5.851429-13.165714-16.091429-13.165714-26.331428v-40.96c-2.925714-8.777143-7.314286-16.091429-13.165714-20.48-7.314286-13.165714 0-35.108571-7.314286-40.96-7.314286-36.571429-26.331429-68.754286-52.662857-93.622857-26.331429-26.331429-73.142857-61.44-131.657143-61.44-51.2 1.462857-98.011429 23.405714-131.657143 61.44-39.497143 36.571429-61.44 87.771429-59.977143 141.897142-13.165714 13.165714-13.165714 35.108571-13.165714 61.44-13.165714 26.331429-46.811429 61.44-52.662857 106.788572 0 26.331429 0 74.605714 26.331429 80.457143 20.48 0 26.331429-35.108571 39.497142-40.96 4.388571 26.331429 17.554286 51.2 39.497143 67.291428-20.48 13.165714-59.977143 20.48-52.662857 54.125715 7.314286 48.274286 118.491429 54.125714 172.617143 35.108571 13.165714-7.314286 20.48-20.48 33.645714-20.48 24.868571 16.091429 51.2 27.794286 78.994286 35.108571 52.662857 7.314286 118.491429-7.314286 127.268571-48.274285 0-35.108571-33.645714-40.96-52.662857-54.125715 21.942857-16.091429 35.108571-40.96 39.497143-67.291428 13.165714 7.314286 20.48 40.96 39.497143 40.96 20.48 0 26.331429-48.274286 20.48-80.457143-2.925714-33.645714-23.405714-68.754286-36.571429-89.234286z" fill="#3783DD" p-id="4904"></path></svg>
                                                </a>
                                            </tooltip>
                                            </div>

                                            <div class="dingTalk">
                                                <svg t="1575521430859" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4008" width="24" height="24"><path d="M616.96 703.104h-48.128s-6.144-3.84-6.144-14.592v-101.12l-54.4 0.64v112.512s5.248 29.696 44.672 29.696h91.264V594.432H616.96v108.672zM453.76 594.432h-50.944s-47.104-1.792-63.488 51.456c-5.76 35.584 5.12 49.152 7.04 53.76 1.92 4.48 17.152 30.72 55.296 30.72h79.488V525.824l-27.136-0.64v69.248z m0 108.672h-40.192s-24.832-0.64-32.384-29.184c-3.84-12.8 0.64-24.96 2.56-30.592 1.792-5.76 10.112-21.76 27.264-21.76h42.752v81.536z" fill="#0068FF" p-id="4009"></path><path d="M511.744 1.664C229.504 1.664 0.64 230.528 0.64 512.768 0.64 795.136 229.504 1024 511.744 1024c282.368 0 511.232-228.864 511.232-511.232 0-282.24-228.864-511.104-511.232-511.104z m31.232 271.232c4.096-37.12 48.512-94.208 84.224-86.016 35.456 8.064 67.968 55.168 61.312 95.744-6.4 40.576-38.656 94.208-88.832 87.68-50.176-6.528-61.568-51.968-56.704-97.408z m-105.088-102.272c37.504 0 67.968 43.264 67.968 96.64s-30.336 96.64-67.968 96.64c-37.504 0-67.968-43.264-67.968-96.64 0-53.504 30.464-96.64 67.968-96.64zM226.048 399.488s8.064-79.488 63.104-84.48c43.776-3.84 75.904 44.032 79.232 71.424 2.048 17.792 11.264 99.072-56.704 113.664-67.84 14.592-93.184-63.872-85.632-100.608z m517.504 342.528c-37.248 87.68-173.184 42.112-173.184 42.112s-50.176-16.128-108.288-3.2c-58.24 13.056-108.288 8.064-108.288 8.064s-68.096 1.664-87.424-84.352c-19.328-86.144 67.968-133.248 74.496-141.184 6.4-8.192 51.712-38.912 80.768-87.68 29.184-48.64 116.48-87.68 177.92 8.064 45.312 64.896 123.008 125.056 123.008 125.056s58.24 45.568 20.992 133.12z m-11.264-199.68c-74.496 1.664-77.568-50.304-77.568-87.552 0-39.04 8.064-94.208 67.968-94.208 59.904 0 76.032 58.496 76.032 77.952-0.128 19.456 7.936 102.144-66.432 103.808z" fill="#0068FF" p-id="4010"></path></svg>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

</template>

<script>

    import {Tooltip} from "element-ui"
    import {Input} from "at-ui"
    import axios from "axios"
    export default {
        name: "Login",
        components:{
            Tooltip,
            AtInput:Input
        },
        data(){
          return{
              yzmSrc:'/api/regist/yzm',//验证码获取地址
              phone:'',//电话
              password:'',//密码
              imgYzm:'',//图片验证码
              phoneType:'',//电话框类型
              passwordType:'',//密码类型
              imgYzmType:'',//图片验证码类型
              phoneTip:'',//电话提示
              passwordTip:'',//密码提示
              imgYzmTip:'',//图片验证码提示
              imgYzmIsRight:'',
          }
        },
        watch:{
          "phone":function () {
              this.checkPhone()
          },
          "password":function () {
              this.checkPassword()
          },
          "imgYzm":function () {
                this.checkImgYzm()
          }
        },
        created(){
            sessionStorage.clear()
        },
        methods:{
            userLogin:function(){
                let uri = "/api/login/doLogin?name=" + this.phone + "&password=" + this.password
                let redirect = "/user/home";
                this.doLogin(uri,redirect)
            },
            doAdminLogin:function(){
                let uri = "/api/login/adminLogin?username=" + this.phone + "&password=" + this.password
                let redirect = "/admin/home";
                this.doLogin(uri,redirect)
            },
            doLogin:function(uri,redirect){

                this.$Message("正在登录中......")
                let checkPhone =  this.checkPhone()
                let checkPassword =  this.checkPassword()
                this.checkImgYzm()
                const that = this
                Promise.all([new Promise((resolve , reject) => {
                    if (this.imgYzm.length >= 4){
                        let url = "/api/regist/checkImgYzm?imgYzm=" + this.imgYzm
                        const that = this
                        return axios.get(url).then(function (res) {
                            if(res.data.code === 100){
                                that.imgYzmType = "success"
                                that.imgYzmTip = "图片验证码匹配成功！"
                                resolve(true)
                            }else{
                                that.imgYzmType = "error"
                                that.imgYzmTip = "图片验证码匹配失败！"
                                resolve(false)
                            }
                        })
                    }else{
                        resolve(false)
                    }
                })]).then(function (results) {
                    if (results[0] && checkPhone  && checkPassword ){
                        axios.get(uri).then(function (res) {
                            if (res.data.code === 100){
                                that.$Message.closeAll()
                                that.$Message({
                                    message: '登录成功！',
                                    type:"success"
                                });
                                if (redirect === "/user/home"){
                                    that.$util.getUserInfo(that)
                                    that.$router.push(redirect)
                                }else{
                                    that.$adminUtil.getUserInfo(that)
                                    if (res.data.data.accountType === 1){
                                        that.$router.push(redirect)
                                    } else if (res.data.data.accountType === 2) {
                                        that.$router.push("/admin/community/home")
                                    } else {
                                        that.$router.push("/admin/system/home")
                                    }
                                }

                            }else if (res.data.code === 60004){
                                that.$Message.closeAll()
                                that.$Message.error("当前账号已被禁止登录，请联系管理员！")
                            } else {

                                that.$Message.closeAll()
                                that.$Message({
                                    message: '用户名或密码填写错误！',
                                    type:"warning"
                                });
                            }
                        })
                    }else{
                        that.$Message.closeAll()
                        that.$Message({
                            message: '信息填写错误！',
                            type:"warning"
                        });
                    }
                })
            },

            //判断图片验证码
            checkImgYzm:function () {
                if (this.imgYzm.length >=4){
                    let url = "/api/regist/checkImgYzm?imgYzm=" + this.imgYzm
                    const that = this
                    return axios.get(url).then(function (res) {
                        if(res.data.code === 100){
                            that.imgYzmType = "success"
                            that.imgYzmTip = "图片验证码匹配成功！"
                            return true
                        }else{
                            that.imgYzmType = "error"
                            that.imgYzmTip = "图片验证码匹配失败！"
                            return false
                        }
                    })
                }else {
                    this.imgYzmType = "error"
                    this.imgYzmTip = "图片验证码匹配失败！"
                    return false
                }
            },
            //改变图片验证码
            changeYzmSrc:function () {
                this.yzmSrc = '/api/regist/yzm?now=' + Date.now();
            },
            //判断用户名
            checkPhone:function () {
                if (this.phone.length >= 6){

                    this.phoneType = "success"
                    this.phoneTip = "核验通过！"
                    return true

                }else{
                    this.phoneType = 'error'
                    this.phoneTip = "核验失败！"
                    return false
                }
            },
            //判断密码
            checkPassword:function () {
                if (this.password.length >= 6){
                    this.passwordType = "success"
                    this.passwordTip = "核验通过！"
                    return true
                }else{
                    this.passwordType = 'error'
                    this.passwordTip = "密码长度最少6位！"
                    return false
                }
            },
            GithubAuth:function () {
                let url = "https://github.com/login/oauth/authorize?client_id=4523142b190f9a6fec47&redirect_uri=http://localhost:8099/GithubCallback&scope=user&state=1"
                window.location.href = url
            },
            QQAuth:function () {
                let url = "https://graph.qq.com/oauth2.0/show?which=Login&display=pc&client_id=101826131&response_type=code&scope=get_info%2Cget_user_info&redirect_uri=http://127.0.0.1:8099/QQCallBack&state=2"
                window.location.href = url
            }
        }
    }
</script>

<style scoped>
    @import "~assets/css/logres/login.css";
    label{
        text-align: left;
        text-shadow: none;
        font-family: -apple-system,BlinkMacSystemFont,"PingFang SC",Helvetica,Tahoma,Arial,"Microsoft YaHei",微软雅黑,黑体,Heiti,sans-serif,SimSun,宋体,serif;
        display: block;
        padding: 0;
    }
    .main{
        margin-top: 100px;
    }
    .title > p{
        font-size: 0.7em;
    }
    .adminButton{
        background-color: white;
        margin-top: 40px;
    }
    .submit >svg{
        width: 18px;
        height: 18px;
        margin-right: 10px;
        vertical-align: middle;
    }


</style>
